<div id="submit-form-container">
  <form
    class="sortable"
    id="submit-form"
    hx-post="/submit/{{ upload_id }}"
    hx-swap="outerHTML"
    hx-target="#submit-form-container"
    hx-indicator="#submitting"
  >
    {% for file in files %}
    <div>
      <input type="hidden" name="file" value="{{ file.file_id }}" />
      <img
        src="data:{{ file.content_type }};base64,{{ file.thumbnail_b64 }}"
        width="150"
      />
      {{ file.filename }}
    </div>
    {% endfor %}
  </form>
  <button form="submit-form" type="submit">Submit</button>
  <p id="submitting" class="htmx-indicator">Submitting...</p>
  <script>
    htmx.onLoad(function (content) {
      let sortables = content.querySelectorAll(".sortable");
      for (let sortable of sortables) {
        let sortableInstance = new Sortable(sortable, {
          animation: 150,
          ghostClass: "blue-background-class",
        });
      }
    });
  </script>
</div>
